.scene {
    size: 200px;
    perspective: 600px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

@mixin enter($start) {
    > .face {
        animation: into 1s both calc(1s + #{$start});
        > .face-interior {
            animation: after-into 5s both 1s;
        }
    }
}

.cube {
    position: absolute 0;
    transform-style: preserve-3d;
    animation: rotate calc(5s) cubic-bezier(0.4, 0.7, 0.7, 1) 1s both;
    > .front {
        @include enter(2s);
        transform: rotateY(0deg) translateZ(var(--center-dist));
    }
    > .right {
        @include enter(0s);
        transform: rotateY(90deg) translateZ(var(--center-dist));
    }
    > .back {
        @include enter(1s);
        transform: rotateY(180deg) translateZ(var(--center-dist));
    }
    > .left {
        @include enter(2s);
        transform: rotateY(-90deg) translateZ(var(--center-dist));
    }
    > .top {
        @include enter(0s);
        transform: rotateX(90deg) translateZ(var(--center-dist));
    }
    > .bottom {
        @include enter(1s);
        transform: rotateX(-90deg) translateZ(var(--center-dist));
    }
    > * {
        position: absolute;
        size: calc(2 * var(--cube-size));
        transform-style: preserve-3d;

    }
    > * > .face {
        position: absolute 0;
        transform-style: preserve-3d;
    }
    > * > .face > .face-interior {
        position: absolute 0;
        background: #fff;
    }
}

@keyframes rotate {
    0% {
        transform: rotate3d(1, 1, 1, 0deg);
    }
    100% {
        transform: rotate3d(1, 1, 1, 360deg);
    }
}

@keyframes into {
    0% {
        transform: translateZ(100px);
    }
    100% {
        transform: translateZ(60px);
    }
}

@keyframes after-into {
    0% {
        opacity: 0;
        transform: translateZ(0);
    }
    10% {
        opacity: 0.05;
        transform: translateZ(0);
    }
    100% {
        opacity: 1;
        transform: translateZ(-60px);
    }
}
