.scene {
    --center-dist: 135px;
    --cube-size: 120px;

    size: calc(2 * var(--cube-size));
    perspective: 1000px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

@mixin enter($start) {
    > .face {
        animation: into 1s both calc(1s + #{$start});
        > .face-interior {
            animation: after-into 5s both 1s, into-opacity 1s both calc(1s + #{$start});
        }
    }
}

.cube {
    position: absolute 0;
    transform-style: preserve-3d;
    animation: rotate calc(5s) cubic-bezier(0.4, 0.7, 0.7, 1) 1s both;
    > .front {
        transform: rotateY(0deg) translateZ(var(--center-dist));
        > .face {
            animation: into 1s both calc(1s + 1s);
            > .face-interior {
                animation: after-into-front 5s both 1s, into-opacity 1s both calc(1s + 1s);
            }
        }
    }
    > .right {
        @include enter(0s);
        transform: rotateY(90deg) translateZ(var(--center-dist));
    }
    > .back {
        @include enter(0.5s);
        transform: rotateY(180deg) translateZ(var(--center-dist));
    }
    > .left {
        @include enter(1.25s);
        transform: rotateY(-90deg) translateZ(var(--center-dist));
    }
    > .top {
        @include enter(0.25s);
        transform: rotateX(90deg) translateZ(var(--center-dist));
    }
    > .bottom {
        @include enter(0.75s);
        transform: rotateX(-90deg) translateZ(var(--center-dist));
    }
    > * {
        position: absolute;
        size: calc(2 * var(--cube-size));
        transform-style: preserve-3d;

    }
    > * > .face {
        position: absolute 0;
        transform-style: preserve-3d;
    }
    > * > .face > .face-interior {
        position: absolute 0;
    }
}

@keyframes rotate {
    0% {
        transform: rotate3d(1, 1, 1, 0deg);
    }
    100% {
        transform: rotate3d(1.5, 1, 2, 360deg);
    }
}

@keyframes into {
    0% {
        transform: translateZ(160px);
    }
    100% {
        transform: translateZ(100px);
    }
}

@keyframes into-opacity {
    0% {
        opacity: 0;
    }
    100% {
        opacity: 1;
    }
}

@keyframes after-into {
    0% {
        background: #fff0;
        transform: translateZ(0);
    }
    100% {
        background: #fff;
        transform: translateZ(-100px);
    }
}
@keyframes after-into-front {
    0% {
        background: #fff0;
        transform: translateZ(0);
    }
    80% {
        background: #fff;
        transform: translateZ(-80px);
    }
    100% {
        background: #fff0;
        border: solid 5px #fff;
        transform: translateZ(-100px);
    }
}
